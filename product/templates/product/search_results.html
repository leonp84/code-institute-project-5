{% extends 'base.html' %}
{% load static %}
{% block extra_title %}Search Results{% endblock %}
{% block content %}
  <div class="container p-3 mt-3">
    <div class="row">
      <div class="col-12 text-center">
        <h3 class="p-3">Found {{ count }} results for '{{ user_query }}'</h3>
      </div>
    </div>
  </div>
  <div class="container d-flex flex-wrap justify-content-evenly">
    <div class="search-and-filter-box">
      <div class="dropdown">
        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                type="button"
                id="search-box-dropdown"
                data-bs-toggle="dropdown"
                aria-expanded="false">Sort By</button>
        <ul class="dropdown-menu" aria-labelledby="search-box-dropdown">
          <li>
            <a class="dropdown-item" href="#">Action</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Another action</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Something else here</a>
          </li>
        </ul>
      </div>
      <div class="dropdown">
        <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                type="button"
                id="search-box-dropdown"
                data-bs-toggle="dropdown"
                aria-expanded="false">Filter By</button>
        <ul class="dropdown-menu dropdown-menu-end"
            aria-labelledby="search-box-dropdown">
          <li>
            <a class="dropdown-item" href="#">Action</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Another action</a>
          </li>
          <li>
            <a class="dropdown-item" href="#">Something else here</a>
          </li>
        </ul>
      </div>
    </div>
    {% for product in search_results %}
      <a href="{% url 'product_detail' product.id %}"
         style="text-decoration: none">
        <div class="col watch-container position-relative">
          {% if product.discount_percentage > 0 %}
            <span class="badge rounded-pill bg-info text-dark sale-item-badge">-{{ product.discount_percentage }}%</span>
          {% endif %}
          <img src="{{ MEDIA_URL }}{{ product.image }}"
               alt="{{ product.watch_brand }} {{ product.title }}"
               width="300"
               height="auto" />
          <span class="text-uppercase">{{ product.get_watch_brand_display }}</span>
          <span><strong>{{ product.short_title }}</strong></span>
          <div>
            {% if product.discount_percentage > 0 %}
              <span class="text-decoration-line-through">$ {{ product.pre_discount_price }}</span>
              <span class="fw-bolder text-primary">$ {{ product.price }} USD</span>
            {% else %}
              <span>$ {{ product.price }} USD</span>
            {% endif %}
          </div>
        </div>
      </a>
    {% endfor %}
  </div>
{% endblock %}
